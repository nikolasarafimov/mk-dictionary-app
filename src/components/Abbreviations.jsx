import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';

const GROUP_NAMES = [
  'Прва група',
  'Втора група',
  'Трета група',
  'Четврта група',
  'Петта група',
  'Шеста група',
  'Седма група'
];

const GROUP_DESCRIPTIONS = [
  'Во оваа група на скратеници влегуваат зборови кои се скратуваат со тоа што се пишуваат само почетните букви наместо целиот збор. Така дел од оваа група се:',
  'Втора група на скратеници опфаќа скратеници кои се со латинско потекло или други странски зборови. Скратувањето е исто како и во првата група на скареници. Во оваа група се:',
  'Третата група скратеници се скратеници што се добиваат со скратување на зборовите до првата самогласка или согласка во зборот. Така имаме:',
  'Оваа група опфаќа скратеници што се добиени со скратување на зборот до првиот слог, односно до согласката на вториот слог. Така имаме:',
  'За мерките од метричкиот систем и за други мерки и големини се употребуваат следниве скратеници:',
  'Со поврзувањето на првата и последната буква или последниот слог се добиваат скратеници како:',
  'Посебен вид на скратеници се скратениците кои се составени од првите букви на сложени називи:'
];

const ABBREV_DATA = [
  { items: [
      'в. – види, век, весник',
      'в.д. – вршител на должност',
      'г. – господин',
      'г.г. – господин господин, господа',
      'г. или год. – година',
      'ж.р. – женски род',
      'л. – лице',
      'м.р. – машки род',
      'н.е. – наша ера / нова ера',
      'о.г. – оваа година',
      'о.м. – овој месец',
      'с. – село',
      'с.р. – своерачно',
      'ср.р. – среден род',
      'т. – точка',
      'т.е. – тоа ест',
      'т.н. – таканаречен'
    ]
  },
  { items: [
      'm. – masculinum / машки род',
      'f. – femininum / женски род',
      'n. – neutrum / среден род',
      'l.c. – loco citato / на приведеното место',
      'o.c. – opus citatum / приведеното дело',
      'a.a. – ad acta / во актите',
      'p.s. или P.S. – post scriptum / по писмото'
    ]
  },
  { items: [
      'бр. – број',
      'гр. – град',
      'д-р – доктор',
      'и др. – и друго',
      'и сл. – и слично',
      'кн. – книга',
      'мн. – множина',
      'на пр. – на пример',
      'од н.е. – од нашата ера',
      'пр. н.е. – пред нашата ера',
      'по Хр. – по Христа',
      'пр. Хр. – пред Христа',
      'св. – свети',
      'сп. – списание',
      'ср. р. – среден род',
      'стр. – страница',
      'ст. ст. – стар стил',
      'чл. – член',
      'итн. – и така натаму'
    ]
  },
  { items: [
      'арх. – архитект',
      'бел. или забел. – белешка, забелешка',
      'гимн. – гимназија',
      'ден. – денар',
      'ген. – генитив',
      'год. или г. – година',
      'дем. – деминутив',
      'едн. – еднина',
      'ул. – улица',
      'инж. или Ing. – инженер',
      'проф. – професор',
      'комп. – компаратив',
      'синг. – сингулар',
      'студ. – студент',
      'ак. – акузатив',
      'бот. – ботаника',
      'вок. – вокатив',
      'грам. – граматика',
      'дат. – датив',
      'им. – именка',
      'мат. – математика',
      'ном. – номинатив',
      'прил. – прилог',
      'прид. – придавка',
      'сврз. – сврзник',
      'физ. – физика',
      'хем. – хемија',
      'пр.н. – природни науки',
      'аугм. – аугментатив',
      'геогр. – географија',
      'истор. – историја',
      'литер. – литература',
      'мит. – митологија',
      'неменл. – неменливо',
      'поет. – поетски',
      'зоол. – зоологија',
      'стсл. – старословенски',
      'пф. – перфективен',
      'импф. – имперфективен'
    ]
  },
  { items: [
      'м – метар',
      'мм – милиметар',
      'см – сантиметар',
      'дм – дециметар',
      'км – километар',
      'кг – килограм',
      'дкг – декаграм',
      'дг – дециграм',
      'мг – милиграм',
      'г – грам',
      'т – тон',
      'кл – килолитар',
      'хл – хектолитар',
      'дкл – декалитар',
      'л – литар',
      'дл – децилитар'
    ]
  },
  { items: [
      'д-р – доктор',
      'м-р – магистер',
      'г-ѓа – госпоѓа',
      'г-а – госпоѓа',
      'г-ца – господичка',
      'г. – господин',
      'г.г. – господин господин'
    ]
  },
  { items: [
      'АСНОМ – Антифашистичко собрание на народното ослободување на Македонија',
      'НОБ – Народноослободителна борба',
      'ВМРО – Внатрешна македонска револуционерна организација',
      'РМ – Република Македонија',
      'САД – Соединети Американски Држави',
      'ЗНД – Заедница на независни држави',
      'СРГ – Сојузна Република Германија',
      'СРЈ – Сојузна Република Југославија',
      'ОН или ООН – Обединети нации',
      'АРМ – Армија на Република Македонија',
      'МАНУ – Македонска академија на науки и уметности',
      'МНТ – Македонски народен театар',
      'ДПМ – Друштво на писателите на Македонија',
      'МЖ – Македонски железници',
      'МТВ – Македонска телевизија',
      'РТВ – Радио-телевизија',
      'ПТТ – Пошта, Телеграф, Телефон',
      'ЈП – Јавно претпријатие',
      'ЗИК – Земјоделско-индустриски комбинат',
      'ИК – Извршен комитет',
      'ЦО – Централен одбор',
      'ФИФА, УНИЦЕФ, УНРРА, АФП'
    ]
  }
];

export default function Abbreviations() {
  const { group } = useParams();                // "1" through "7" or undefined
  const navigate = useNavigate();

  // Convert param to valid 1-7 number, default to 1
  const parsed = parseInt(group, 10);
  const validGroup = (parsed >= 1 && parsed <= GROUP_NAMES.length) ? parsed : 1;

  // zero-based index for arrays
  const [groupIdx, setGroupIdx] = useState(validGroup - 1);

  // Sync state when URL param changes
  useEffect(() => {
    const p = parseInt(group, 10);
    const g = (p >= 1 && p <= GROUP_NAMES.length) ? p : 1;
    setGroupIdx(g - 1);
  }, [group]);

  const description = GROUP_DESCRIPTIONS[groupIdx];
  const items = ABBREV_DATA[groupIdx].items;

  return (
    <section className="abbreviations">
      <h2>Скратеници</h2>
      <p className="intro">
        Скратениците во македонскиот јазик се добиваат со скратување на зборови или спојување на почетни букви
        во сложени називи. За полесно наоѓање, тие се поделени во седум групи според видот на скратувањето.
      </p>

      <div className="abbr-groups">
        {GROUP_NAMES.map((name, i) => (
          <button
            key={i}
            className={i === groupIdx ? 'active' : ''}
            onClick={() => {
              navigate(`/abbr/${i + 1}`);
              setGroupIdx(i);
            }}
          >
            {name}
          </button>
        ))}
      </div>

      <p className="abbr-intro">{description}</p>

      {items.length === 0 ? (
        <p className="no-abbr">Нема кратенки во оваа група.</p>
      ) : (
        <div className="abbr-grid">
          {items.map((item, idx) => {
            const [abbr, meaning] = item.split(/\s*–\s*/);
            return (
              <div key={idx} className="abbr-item">
                <strong className="abbr-key">{abbr}</strong>
                <span className="abbr-meaning">{meaning}</span>
              </div>
            );
          })}
        </div>
      )}
    </section>
  );
}